<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digeon.ai Newsletter</title>
  <link rel="icon" href="/static/images/icon.png" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ===== Global Dark Theme (no behavior changes) ===== */
body{margin:0;font-family:'Inter',Arial,sans-serif;background:linear-gradient(135deg,#0d1117,#161b22);color:#f5f5f5;overflow-x:hidden}
a{color:#00d1c4;text-decoration:none} a:hover{text-decoration:underline}
.container{max-width:1200px;margin:0 auto;padding:0 24px}

/* ===== Navbar (keep your Flask paths) ===== */
.navbar{background:rgba(13,17,23,.85);backdrop-filter:blur(10px);position:sticky;top:0;z-index:100;box-shadow:0 4px 20px rgba(0,0,0,.4);animation:fadeDown .6s ease forwards}
.navbar .container{display:flex;justify-content:space-between;align-items:center;height:60px}
.logo img{height:44px;border-radius:6px;display:block}
.nav-links{list-style:none;display:flex;gap:28px;margin:0;padding:0}
.nav-links a{font-weight:600;font-size:1rem;padding-bottom:4px;border-bottom:2px solid transparent;transition:color .2s,border-bottom .2s;color:#f0f0f0}
.nav-links a:hover{color:#00d1c4;border-bottom-color:#00d1c4}

/* (Optional) top-right search, if you add it later */
#site-search{display:flex;align-items:center}
#search-input{padding:7px 12px;border-radius:5px 0 0 5px;border:none;outline:none;font-size:1rem}
#site-search button{padding:7px 14px;border:none;background:#00d1c4;color:#fff;border-radius:0 5px 5px 0;cursor:pointer;font-weight:bold}

/* ===== Layout ===== */
.newsletter-main{display:flex;flex-wrap:wrap;gap:30px;max-width:1200px;margin:50px auto;animation:fadeUp .8s ease forwards}
.newsletter-left,.newsletter-right{flex:1 1 500px;border-radius:12px;padding:30px;background:rgba(255,255,255,.05);backdrop-filter:blur(8px);box-shadow:0 4px 30px rgba(0,0,0,.3)}
.newsletter-left h1{font-size:2.2rem;margin:0 0 20px;color:#fff}
.newsletter-left h3{margin:25px 0 10px;font-size:1.4rem;color:#00d1c4}
.newsletter-left ul{padding-left:20px}
.newsletter-left li{margin-bottom:10px;line-height:1.5}

/* ===== Right column (form) ===== */
.newsletter-form-desc{font-size:1.2rem;margin-bottom:20px;line-height:1.4;color:#e6e6e6}
.newsletter-form{display:flex;flex-direction:column;gap:15px}
.newsletter-form-row{display:flex;gap:30px;flex-wrap:wrap}
.newsletter-form label{font-weight:600;margin-bottom:5px;display:block}
.newsletter-form input[type="text"],.newsletter-form input[type="email"]{padding:12px;border-radius:6px;border:none;outline:none;font-size:1rem;width:100%;background:#1a1f27;color:#f5f5f5}
.newsletter-form input:focus{box-shadow:0 0 0 2px #00d1c4}
.newsletter-form-categories{display:flex;flex-wrap:wrap;gap:12px 20px}
.newsletter-form input[type="checkbox"]{accent-color:#00d1c4}
.newsletter-form button{background:#00d1c4;border:none;color:#fff;font-weight:bold;padding:12px 28px;border-radius:8px;cursor:pointer;transition:background .2s}
.newsletter-form button:hover{background:#00a79e}
.newsletter-success{display:none;background:rgba(0,209,196,.1);padding:15px;border-radius:8px;color:#00d1c4;text-align:center;margin-top:15px}

/* ===== Login/Access banner (keep your existing logic) ===== */
.directory-access-banner{background:#fff3cd;color:#000;border:1.5px solid #ffe599;border-radius:9px;padding:17px 34px;margin:22px auto 0;max-width:700px;font-size:1.05rem;text-align:center;display:none}
.directory-access-banner .banner-action{margin-left:13px;background:#00d1c4;color:#fff;border:none;border-radius:6px;padding:7px 18px;font-weight:700;cursor:pointer;text-decoration:none}
.directory-access-banner .banner-action:hover{background:#00a79e}

/* ===== Footer ===== */
footer{text-align:center;padding:20px;color:#aaa;font-size:.9rem;border-top:1px solid rgba(255,255,255,.1);margin-top:50px}

/* ===== Reveal helpers ===== */
.animate{opacity:0;transform:translateY(12px);transition:opacity .6s ease,transform .6s ease}
.animate.visible{opacity:1;transform:translateY(0)}
@keyframes fadeDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* ===== Responsive ===== */
@media(max-width:1100px){.navbar .container{flex-direction:column;height:auto;padding:10px 3vw;gap:12px}}
@media(max-width:650px){
  .nav-links{gap:10px;font-size:.95rem}
  .newsletter-main{margin:22px auto}
  .newsletter-left,.newsletter-right{padding:18px}
  .newsletter-form-row{flex-direction:column;gap:12px}
  .newsletter-left h1{font-size:1.6rem}
}
</style>

</head>
<body>
  <header>
    <nav class="navbar">
      <div class="container">
        <a href="/" class="logo" style="padding:0;">
          <img src="/static/images/logo.png" alt="Digeon.ai logo" style="height:44px;width:auto;vertical-align:middle;border-radius:6px;">
        </a>
        <ul class="nav-links">
          <li><a href="directory">Directory</a></li>
          <li><a href="marketplace">Marketplace</a></li>
          <li><a href="blog">Blog</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- LOGIN REMINDER BANNER -->
  <div id="directory-access-banner" class="directory-access-banner" style="display:none;">
    <span>Want to access the full AI Marketplace? <strong>Please login or register first.</strong></span>
    <a class="banner-action" href="login">Login</a>
    <a class="banner-action" href="register" style="background:#0077cc;">Register</a>
    <button class="banner-close" onclick="document.getElementById('directory-access-banner').style.display='none';" title="Dismiss">&times;</button>
  </div>

  <main>
    <!-- TEMP: public authoring entry -->
    <div style="max-width:1200px;margin:18px auto 0;display:flex;justify-content:flex-end;padding:0 24px;">
      <!-- If you serve the editor via Flask, use href="/newsletter-create".
          If it’s a static file, use href="/newsletter-create.html". -->
      <a href="/newsletter-create"
        id="create-newsletter-link"
        style="background:#00d1c4;color:#fff;font-weight:800;padding:10px 14px;border-radius:8px;text-decoration:none;">
        Create Newsletter
      </a>
    </div>
    <div class="newsletter-main">
      <!-- LEFT SIDE -->
      <section class="newsletter-left animate">
        <h1 class="animate" style="font-size:2.85rem;text-align:left;">
          Stay Informed, Stay Ahead with<br>
          Digeon.ai<br>
          weekly digest
        </h1>
        <h3>What You'll Get Every Week?</h3>
        <ul>
          <li>Handpicked AI tools and agents to supercharge your workflow</li>
          <li>Exclusive insights into AI Trends in Software Development, Content Creation, Productivity, Marketing, Data Analytics and More</li>
          <li>Tool tutorials, tips, use cases – from automation to visual design</li>
          <li>Pro recommendations you won’t find on generic AI directories</li>
          <li>Early access to tools, marketplaces and platform Updates</li>
        </ul>
        <h3>Why Subscribe?</h3>
        <ul>
          <li>Save hours on AI research – we test and curate tools so you don’t have to</li>
          <li>Be the first to discover powerful, niche AI agents before they trend</li>
          <li>Stay in the loop with Digeon.ai product updates and community events</li>
        </ul>
      </section>
      <!-- RIGHT SIDE -->
      <section class="newsletter-right animate">
        <div class="newsletter-form-desc">
          Subscribe to our weekly newsletter for exclusive updates on AI developments, expert insights, and practical tips to keep you informed and ahead in the rapidly changing tech landscape.
        </div>
        <form class="newsletter-form" id="newsletter-form" autocomplete="off">
          <div class="newsletter-form-row">
            <div style="flex:1;">
              <label for="newsletter-name">Name</label>
              <input type="text" id="newsletter-name" name="newsletter-name" required>
            </div>
            <div style="flex:1;">
              <label for="newsletter-email">Email</label>
              <input type="email" id="newsletter-email" name="newsletter-email" required>
            </div>
          </div>
          <div style="margin-top:8px;margin-bottom:2px;font-weight:700;font-size:1.14rem;color:#333;">Area of Interest</div>
          <div class="newsletter-form-categories">
            <div class="checkbox-group">
              {% for category in categories %}
                <label>
                  <input type="checkbox" name="area[]" value="{{ category }}"> {{ category }}
                </label>
              {% endfor %}
            </div>
          </div>
          <button type="submit" id="newsletter-submit">Subscribe</button>
        </form>
        <div id="newsletter-success" class="newsletter-success" style="display:none;">
          Thank you for subscribing! You’ll receive our next issue in your inbox.
        </div>
      </section>
    </div>
  </main>
  <!-- Directory Login Required Modal -->
  <div id="dir-login-modal">
    <div class="modal-box">
      <h2>Login Required</h2>
      <div>Please login or register to access the Directory page.</div>
      <div class="modal-actions">
        <a href="login">Login</a>
        <a href="register">Register</a>
      </div>
      <button onclick="document.getElementById('dir-login-modal').style.display='none'">Cancel</button>
    </div>
  </div>
  <footer>
    <div class="container">
      <p>&copy; 2025 Digeon AI. All rights reserved.</p>
    </div>
  </footer>
  <script>
    // Show/hide persistent login banner if user is not logged in
    window.addEventListener('DOMContentLoaded', function() {
      if (!localStorage.getItem('marketplaceUser')) {
        document.getElementById('directory-access-banner').style.display = "flex";
      }
    });

    // Newsletter subscription confirmation logic
    document.getElementById('newsletter-form').onsubmit = async function(e) {
    e.preventDefault();

    const name = document.getElementById('newsletter-name').value.trim();
    const email = document.getElementById('newsletter-email').value.trim();
    const checkboxes = document.querySelectorAll('input[name="area[]"]:checked');
    const categories = Array.from(checkboxes).map(cb => cb.value);

    const btn = document.getElementById('newsletter-submit');
    btn.disabled = true;
    btn.textContent = "Subscribing...";

    const res = await fetch("/api/subscribe", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, email, categories })
    });

    const result = await res.json();
    if (result.status === 1) {
      document.getElementById('newsletter-form').style.display = "none";
      document.getElementById('newsletter-success').style.display = "block";
    } else {
      alert("Subscription failed: " + (result.error || "unknown error"));
      btn.disabled = false;
      btn.textContent = "Subscribe";
    }

    const params = new URLSearchParams(window.location.search);
    if (params.get("next") === "/directory") {
      window.location.href = "/directory";
      return;
  }
  };

    // Intercept Directory link in navbar
    document.querySelectorAll('.nav-links a[href="directory.html"]').forEach(link => {
      link.addEventListener('click', function(e) {
        if (!localStorage.getItem('marketplaceUser')) {
          e.preventDefault();
          document.getElementById('dir-login-modal').style.display = 'flex';
        }
      });
    });
  </script>

  <script>
  document.addEventListener('DOMContentLoaded',function(){
    const obs=new IntersectionObserver((entries)=>{
      entries.forEach((e,i)=>{ if(e.isIntersecting){ setTimeout(()=>e.target.classList.add('visible'), i*120); }});
    },{threshold:.15});
    document.querySelectorAll('.animate').forEach(el=>obs.observe(el));
  });
  </script>

</body>
</html>