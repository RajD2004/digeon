<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>Admin Dashboard</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-dashboard.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}?v=6">
</head>
<body>
  <div class="container">
    <h1>Admin Dashboard</h1>

    <div class="grid">
      <!-- NEWSLETTER -->
      <div class="card">
        <h2>Create / Edit Newsletter</h2>
        <div class="body">
          <div>
            <label for="nlSubject">Subject *</label>
            <input id="nlSubject" type="text" maxlength="120" placeholder="e.g., 7 AI tools that save 5+ hours/week" />
          </div>

          <div style="margin-top:10px">
            <label for="nlContent">Body *</label>

            <!-- Toolbar (Newsletter) -->
            <!-- Toolbar (Newsletter) -->
            <div id="nlToolbar" class="editor-toolbar" data-for="nlContent" style="margin:6px 0 8px; display:flex; flex-wrap:wrap; gap:8px;">
              <button type="button" class="tb" data-act="bold"       aria-label="Bold"><b>B</b></button>
              <button type="button" class="tb" data-act="italic"     aria-label="Italic"><i>I</i></button>
              <button type="button" class="tb" data-act="h1"         aria-label="Heading 1">H1</button>
              <button type="button" class="tb" data-act="h2"         aria-label="Heading 2">H2</button>
              <button type="button" class="tb" data-act="h3"         aria-label="Heading 3">H3</button>
              <button type="button" class="tb" data-act="code"       aria-label="Inline code">Code</button>
              <button type="button" class="tb" data-act="codeblock"  aria-label="Code block">Code Block</button>
              <button type="button" class="tb" data-act="link"       aria-label="Insert link">Link</button>
              <button type="button" class="tb" data-act="highlight"  aria-label="Highlight">HL</button>
              <button type="button" class="tb" data-act="sub"        aria-label="Subscript">Sub</button>
              <button type="button" class="tb" data-act="sup"        aria-label="Superscript">Sup</button>
            </div>


            <textarea id="nlContent" placeholder="Write your post here. Use {{name}} to personalize the greeting."></textarea>
          </div>

          <div class="row" style="align-items:center;margin-top:8px">
            <button class="btn btn-outline" id="nlInsertName" type="button">Insert {{name}}</button>
            <span class="help">Click to insert the {{name}} token where your cursor is.</span>
          </div>

          <fieldset style="margin-top:12px">
            <legend>Area of Interest</legend>

            <!-- Controls for cleaner AoI management -->
            <div class="row" style="gap:8px;margin:6px 0 8px;">
              <button class="btn btn-outline" id="nlCatsSelectAll" type="button">Select All</button>
              <button class="btn btn-outline" id="nlCatsClear" type="button">Clear</button>
            </div>

            <!-- Grid container that JS will populate -->
            <div id="nlCatGrid" class="cat-grid"></div>
          </fieldset>

          <div class="actions">
            <button class="btn btn-outline" id="nlClearBtn" type="button">Clear</button>
            <button class="btn" id="nlSaveDraftBtn" type="button">Save Draft</button>
            <button class="btn" id="nlPublishBtn" type="button">Publish</button>
          </div>

          <!-- Preview -->
          <div class="preview">
            <div class="head">
              <strong>Live Preview</strong>
              <span id="pvStatus" class="help">Draft not saved</span>
            </div>
            <div class="body">
              <p id="pvSubject" style="margin:0 0 6px;font-weight:800">[Subject will appear here]</p>
              <p id="pvGreet" style="margin:0 0 10px;color:#cfe0f2">Hi there,</p>
              <p id="pvContent" style="white-space:pre-wrap;margin:0;color:#e6edf3">Start writing your post body to see a preview…</p>
              <div id="pvTags" class="tags" style="margin-top:10px"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- BLOG -->
      <div class="card">
        <h2>Write Blog</h2>
        <div class="body">
          <div>
            <label for="blTitle">Title *</label>
            <input id="blTitle" type="text" maxlength="120" placeholder="Post title" />
          </div>

          <div style="margin-top:10px">
            <label for="blContent">Content *</label>

            <!-- Toolbar (Blog) -->
            <div id="blToolbar" class="editor-toolbar" data-for="blContent" style="margin:6px 0 8px; display:flex; flex-wrap:wrap; gap:8px;">
              <button type="button" class="tb" data-act="bold"       aria-label="Bold"><b>B</b></button>
              <button type="button" class="tb" data-act="italic"     aria-label="Italic"><i>I</i></button>
              <button type="button" class="tb" data-act="h1"         aria-label="Heading 1">H1</button>
              <button type="button" class="tb" data-act="h2"         aria-label="Heading 2">H2</button>
              <button type="button" class="tb" data-act="h3"         aria-label="Heading 3">H3</button>
              <button type="button" class="tb" data-act="code"       aria-label="Inline code">Code</button>
              <button type="button" class="tb" data-act="codeblock"  aria-label="Code block">Code Block</button>
              <button type="button" class="tb" data-act="link"       aria-label="Insert link">Link</button>
              <button type="button" class="tb" data-act="highlight"  aria-label="Highlight">HL</button>
              <button type="button" class="tb" data-act="sub"        aria-label="Subscript">Sub</button>
              <button type="button" class="tb" data-act="sup"        aria-label="Superscript">Sup</button>
            </div>

            <textarea id="blContent" placeholder="Write your blog post…"></textarea>
          </div>

          <div style="margin-top:10px">
            <label for="blImage">Image (optional)</label>
            <input id="blImage" type="file" accept="image/*" />
            <div class="help">If provided, it will be uploaded with the post.</div>
          </div>

          <div class="actions">
            <button class="btn btn-outline" id="blClearBtn" type="button">Clear</button>
            <button class="btn" id="blSaveDraftBtn" type="button">Save Draft</button>
            <button class="btn" id="blPublishBtn" type="button">Publish Blog</button>
          </div>

          <!-- Blog Live Preview -->
          <div class="preview" style="margin-top:12px;">
            <div class="head">
              <strong>Live Preview (Blog)</strong>
              <span id="blPvStatus" class="help">Draft not saved</span>
            </div>
            <div class="body">
              <h3 id="blPvTitle" style="margin:0 0 8px;">[Title will appear here]</h3>
              <div id="blPvContent" class="markdown" style="color:#e6edf3">Start writing your blog post…</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- BLOG LIST -->
    <div class="card" style="margin-top:18px">
      <h2>All Blogs</h2>
      <div class="body table-wrap">
        <table>
          <thead>
            <tr><th>Title</th><th>Excerpt</th><th>Created</th><th>Actions</th></tr>
          </thead>
          <tbody id="blTbody"></tbody>
        </table>
        <div id="blEmpty" class="help" style="display:none;margin-top:8px">No blog posts yet.</div>
      </div>
    </div>

    <!-- NEWSLETTER LIST (new) -->
    <div class="card" style="margin-top:18px">
      <h2>All Newsletters</h2>
      <div class="body table-wrap">
        <table>
          <thead>
            <tr><th>Subject</th><th>Preview</th><th>Created</th></tr>
          </thead>
          <tbody id="nlTbody"></tbody>
        </table>
        <div id="nlEmpty" class="help" style="display:none;margin-top:8px">No newsletters yet.</div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <!-- External JS -->
  <script src="{{ url_for('static', filename='js/admin-dashboard.js') }}"></script>
</body>
</html>
