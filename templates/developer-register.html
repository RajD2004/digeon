<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Digeon AI - Developer Agent Registration</title>
  <link rel="icon" href="/static/images/icon.png" type="image/png">

  <!-- externalized CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/developer-register.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}?v=6">
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="container">
        <a href="/" class="logo"><img src="/static/images/logo.png" alt="Digeon.ai logo"></a>
        <ul class="nav-links">
          <li><a href="newsletter">Newsletter</a></li>
          <li><a href="directory">Directory</a></li>
          <li><a href="marketplace">Marketplace</a></li>
          <li><a href="blog">Blog</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main>
    <!-- Tabs for Developer Auth -->
    <div class="tab-row" id="tab-row">
      <button id="tab-login" class="active">Developer Login</button>
      <button id="tab-register">Developer Register</button>
    </div>

    <!-- Auth Forms -->
    <div id="dev-auth-section">
      <div class="auth-container" id="dev-login-section">
        <h2>Developer Login</h2>
        <form id="dev-login-form" class="auth-form" autocomplete="off">
          <input type="email" id="dev-login-email" placeholder="Email" required>
          <input type="password" id="dev-login-password" placeholder="Password" required>
          <button type="submit">Login</button>
        </form>
        <div class="form-link-row">
          <a href="forgot-password">Forgot Password?</a>
        </div>
        <div class="auth-msg" id="dev-login-msg"></div>
      </div>

      <div class="auth-container" id="dev-register-section" style="display:none;">
        <h2>Developer Registration</h2>
        <form id="dev-register-form" class="auth-form" autocomplete="off">
          <input type="email" id="dev-register-email" placeholder="Email" required>
          <input type="password" id="dev-register-password" placeholder="Password" required>
          <input type="password" id="dev-register-password2" placeholder="Confirm Password" required>
          <button type="submit">Register</button>
        </form>
        <div class="form-link-row">
          <a href="forgot-password.html">Forgot Password?</a>
        </div>
        <div class="auth-msg" id="dev-register-msg"></div>
      </div>
    </div>

    <!-- Main Agent Registration, hidden until dev logged in -->
    <div id="main-dev-container" class="main-dev-container" style="display:none;">
      <h2>Register Your Agent</h2>
      <div class="dev-form-flex">
        <!-- Left: form -->
        <div class="dev-form-side">
          <form id="agent-form" class="dev-form" autocomplete="off">
            <label for="agent-name">Agent Name</label>
            <input type="text" id="agent-name" required maxlength="32" placeholder="e.g. VoiceGen Pro">

            <label for="agent-desc">Description</label>
            <textarea id="agent-desc" required maxlength="180" placeholder="What does your agent do?"></textarea>

            <label for="agent-type">Agent Type</label>
            <select id="agent-type" required>
              <option value="">Select Type</option>
              <option value="Text">Text</option>
              <option value="Audio">Audio</option>
              <option value="Video">Video</option>
              <option value="Other">Other</option>
            </select>

            <label>Agent Input Fields</label>
            <div class="dynamic-fields" id="dynamic-fields"></div>

            <!-- NEW: template for a field row with label ABOVE the type -->
            <template id="field-row-template">
              <div class="field-row">
                <!-- Label the user will type (what this input is about) -->
                <input type="text" class="field-label-input" placeholder="Field label (e.g., Upload Logo)" maxlength="60" />

                <div class="field-row-bottom">
                  <!-- The input TYPE selector (options can be populated/overridden by JS if needed) -->
                  <select class="field-type-select">
                    <option value="Text">Text</option>
                    <option value="Audio">Audio</option>
                    <option value="Video">Video</option>
                    <option value="File">File</option>
                    <option value="Image">Image</option>
                    <option value="Number">Number</option>
                    <option value="Other">Other</option>
                  </select>
                  <button type="button" class="remove-field-btn" title="Remove">&times;</button>
                </div>
              </div>
            </template>

            <button type="button" class="add-field-btn" id="add-field-btn">+ Add Field</button>

            <label for="agent-price">Price (USD)</label>
            <input type="number" id="agent-price" required min="0" step="0.01" placeholder="0.00">

            <label for="agent-api-url">Agent API Endpoint</label>
            <input type="url" id="agent-api-url" required placeholder="https://api.example.com/endpoint">

            <input type="hidden" id="field-config" name="field-config">
            <button type="submit">Submit Agent</button>
          </form>
          <div id="agent-msg" class="auth-msg" style="margin-top:10px;"></div>
        </div>

        <!-- Right: live preview -->
        <div class="preview-side">
          <div class="agent-preview-card">
            <h3 id="prev-name">Agent name</h3>
            <p id="prev-desc">Short description…</p>
            <div class="agent-type" id="prev-type">Type: —</div>
            <div class="agent-price" id="prev-price">$0.00</div>
            <hr style="margin:12px 0;border:none;border-top:1px solid #d3e2ea;">
            <div id="prev-inputs"></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Digeon AI. All rights reserved.</p>
    </div>
  </footer>

  <!-- externalized JS -->
  <script src="{{ url_for('static', filename='js/developer-register.js') }}"></script>
</body>
</html>
